<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&#x2694LRM&#x2694</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        .cards-container {
            display: flex;
            gap: 10px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 30px;
            flex-wrap: nowrap;
            text-align: center;
            justify-content: center;
        }
        .card {
            width: 100px;
            height: 140px;
            border-radius: 3px;
            box-shadow: 0 4px 6px rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .card.dealt {
            opacity: 1;
            transform: translateY(0);
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>

<body>
    <script type=module src=../main.js></script>
    <div class="wrapper-main">
        <my-header></my-header>
        <main>
            <h1>
                <br>Hold'em Board Generator
            </h1>
            <div class="cards-container" id="cardsContainer"></div>
            <div>
                <button onclick="dealNext()" id="dealButton">Deal Flop</button>
            </div>
            <div>
                <label for="nuts">Nuts:</label>
                <input list="hand-types" id="nuts" name="nuts" />
                <datalist id="hand-types">
                    <option value="sflush"></option>
                    <option value="quads"></option>
                    <option value="boat"></option>
                    <option value="flush"></option>
                    <option value="straight"></option>
                    <option value="trips"></option>
                    <option value=""></option>
                </datalist>
            </div>
    <script>
        let currentDeck = [];
        let currentHand = [];
        let dealStage = 0; // 0 = ready for flop, 1 = flop dealt, 2 = turn dealt, 3 = river dealt
        
        const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'J', 'Q', 'K'];
        
        function createDeck() {
            const deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({
                        rank: rank,
                        suit: suit,
                        image: `https://deckofcardsapi.com/static/img/${rank.toUpperCase()}${suit.charAt(0).toUpperCase()}.png`
                    });
                }
            }
            return deck;
        }
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function dealNext() {
            const button = document.getElementById('dealButton');
            const container = document.getElementById('cardsContainer');
            
            if (dealStage === 0) {
                // Deal flop (3 cards)
                const deck = createDeck();
                const shuffled = shuffleArray(deck);
                currentHand = shuffled.slice(0, 5);
                
                container.innerHTML = '';
                
                // Create all card elements
                currentHand.forEach(card => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card';
                    cardDiv.innerHTML = `<img src="${card.image}" alt="${card.rank} of ${card.suit}">`;
                    container.appendChild(cardDiv);
                });
                
                const cards = container.querySelectorAll('.card');
                
                // Deal first 3 cards
                setTimeout(() => cards[0].classList.add('dealt'), 100);
                setTimeout(() => cards[1].classList.add('dealt'), 200);
                setTimeout(() => cards[2].classList.add('dealt'), 300);
                
                dealStage = 1;
                button.textContent = 'Deal Turn';
                if (currentHand[0].rank == currentHand[1].rank || currentHand[0].rank == currentHand[2].rank || currentHand[1].rank == currentHand[2].rank) {
                nuts.value = "quads";
                }
                
            } else if (dealStage === 1) {
                // Deal turn (4th card)
                const cards = container.querySelectorAll('.card');
                cards[3].classList.add('dealt');
                dealStage = 2;
                button.textContent = 'Deal River';
                
            } else if (dealStage === 2) {
                // Deal river (5th card)
                const cards = container.querySelectorAll('.card');
                cards[4].classList.add('dealt');
                dealStage = 3;
                button.textContent = 'New Hand';
                
            } else {
                // Reset for new hand
                dealStage = 0;
                button.textContent = 'Deal Flop';
                nuts.value = "";
                dealNext();
            }
        }
        
        // Start with button ready
        dealStage = 0;
    </script>
  
        </main>
        <my-footer></my-footer>
    </div>
</body>
</html>
